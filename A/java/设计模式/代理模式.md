# 代理模式



## 1、静态代理

这个没什么好说的

就比如有 3 个类 A B C，有的地方使用它们需要在每个方法下记录相同的日志，而有的地方使用它们又不需要记录日志

按照上面的需求，需要 6 个类了，3 个 写日志的，3 个不写日志的，并且日志都是相同的

这种就是静态代码，代码是写死的



静态代码的缺点：

- 如果需要增加一个类 D 的话，要实现相同的逻辑，那么就需要写两个 D 类，一个写日志，一个不写日志
- 如果需要改动日志输出的话，那么写日志的几个类全部需要改动

简而言之就是不够灵活，不能随着需求的变化而自动变化



## 2、动态代理

动态代理有 JDK 动态代理 和 cglib 动态代理两种，而 JDK 动态代理的本质是利用 反射 来实现

Spring 的 AOP 实现，它是通过后置处理器来处理的



### 1、JDK 动态代理