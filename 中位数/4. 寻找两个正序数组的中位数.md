## **[4. å¯»æ‰¾ä¸¤ä¸ªæ­£åºæ•°ç»„çš„ä¸­ä½æ•°](https://leetcode-cn.com/problems/median-of-two-sorted-arrays/)**



```java
ç»™å®šä¸¤ä¸ªå¤§å°ä¸º m å’Œ n çš„æ­£åºï¼ˆä»å°åˆ°å¤§ï¼‰æ•°ç»„Â nums1 å’ŒÂ nums2ã€‚

è¯·ä½ æ‰¾å‡ºè¿™ä¸¤ä¸ªæ­£åºæ•°ç»„çš„ä¸­ä½æ•°ï¼Œå¹¶ä¸”è¦æ±‚ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸ºÂ O(log(m + n))ã€‚

ä½ å¯ä»¥å‡è®¾Â nums1Â å’ŒÂ nums2Â ä¸ä¼šåŒæ—¶ä¸ºç©ºã€‚
```



## **ç¤ºä¾‹ 1:**

```java
nums1 = [1, 3]
nums2 = [2]

åˆ™ä¸­ä½æ•°æ˜¯ 2.0
```





## **ç¤ºä¾‹ 2:**

```java
nums1 = [1, 2]
nums2 = [3, 4]

åˆ™ä¸­ä½æ•°æ˜¯ (2 + 3)/2 = 2.5
```





## **1ã€Oï¼ˆm + nï¼‰ è§£æ³•**

### **å®ç°æ€è·¯**

```java
æš´åŠ›è§£æ³•æ˜¯å°†ä¸¤ä¸ªæ•°ç»„åˆå¹¶ï¼Œç„¶åç›´æ¥æ‰¾ä¸­ä½æ•°å³å¯ï¼Œè¿™æ ·å¤ªåºŸäº†

æˆ‘ä»¬å¹¶ä¸éœ€è¦çœŸæ­£åˆå¹¶ï¼Œè€Œåªéœ€è¦å®ç° ç±»ä¼¼ å½’å¹¶ é‚£ç§æ“ä½œå³å¯ï¼Œè¾¹éå†è¾¹æ¯”è¾ƒè¾¹è®°å½•

        ä¸­ä½æ•°ï¼š
        1ã€å¦‚æœé•¿åº¦ä¹‹å’Œä¸º å¶æ•°ï¼Œé‚£ä¹ˆå°±æ˜¯ len / 2 å’Œ len / 2 + 1 å’Œçš„ä¸€åŠ
        	1	2	3	4	5	6
    				ğŸ‘†	ğŸ‘†
    				one two
        2ã€å¦‚æœé•¿åº¦ä¹‹å’Œä¸º å¥‡æ•°ï¼Œé‚£ä¹ˆå°±æ˜¯ len / 2 + 1
			1	2	3	4	5
    				ğŸ‘†
    			one two	
```



### **å®ç°ä»£ç **

```java
class Solution {
    public double findMedianSortedArrays(int[] nums1, int[] nums2) {
        
        int len1 = nums1.length;
        int len2 = nums2.length;

        int len = len1 + len2;

        int preOne = -1;
        int preTwo = -1;
        int i = 0;
        int j = 0;
        int idx = 0;
        while(idx++ < len / 2 + 1){
            preOne = preTwo;
            //å¦‚æœ æ•°ç»„ 2 åˆ°è¾¾è¾¹ç•Œ æˆ–è€… æ•°ç»„ 1 çš„å…ƒç´ æ¯”æ•°ç»„ 2 çš„å°ï¼Œé‚£ä¹ˆè®°å½•æ•°ç»„ 1 çš„å…ƒç´ 
            if(j == len2 || (i < len1 && nums1[i] < nums2[j])){
                preTwo = nums1[i];
                i++;
            }else{
                preTwo = nums2[j];
                j++;
            }
        }
        return len % 2 == 0 ? (preOne + preTwo) * 0.5 : preTwo;
    }
}
```





## **2ã€O(log(m + n)) è§£æ³•**

### **å®ç°æ€è·¯**

â€‹        `int k = (len1 + len2) / 2`ï¼Œå³ä¸­ä½æ•°çš„ä½ç½®
â€‹        `len1 + len2 = 4`ï¼Œé‚£ä¹ˆä¸­ä½æ•°ä½äº `k1 = 2, k2 = 3`
â€‹        `len1 + len2 = 3`,é‚£ä¹ˆä¸­ä½æ•°ç´¢å¼•ä¸º  `k1 = 2, k2 = 2`
â€‹            æˆ‘ä»¬ä¸æ˜¯ä¸€ä¸ªä¸ªè¿›è¡Œç§»åŠ¨ï¼Œè€Œæ˜¯ç›´æ¥å®šä½åˆ° k çš„ä½ç½®
â€‹        æˆ‘ä»¬å¯¹ num1 å’Œ num2 æ¯æ¬¡å– k / 2 æ¥è¿›è¡Œæ¯”è¾ƒï¼Œç”±äºæ•°ç»„çš„æ˜¯æœ‰åºçš„ï¼Œå› æ­¤æœ«å°¾å°çš„é‚£ k / 2 éƒ¨åˆ†è‚¯å®šä¸å­˜åœ¨ä¸­ä½æ•°ï¼Œå› æ­¤ç›´æ¥èˆå¼ƒ
â€‹        æ¯”å¦‚ `nums1 = [1,2,3,4], nums2 = [5,6,7,8] `
â€‹        æˆ‘ä»¬æ±‚ k = 4
â€‹        é‚£ä¹ˆæˆ‘ä»¬æ¯ä¸ªæ•°ç»„å– k / 2 = 2ï¼Œå³ 2 ä¸ªå…ƒç´ ï¼Œè¿›è¡Œæ¯”è¾ƒ
â€‹       ` [1,2] å’Œ [5,6]`
â€‹        ç”±äº [1,2] æœ«å°¾ 2 < [5,6] æœ«å°¾ 6ï¼Œå› æ­¤ [1,2] å¿…å®šä¸å­˜åœ¨äºä¸­ä½æ•°ä¸­ç›´æ¥èˆå¼ƒï¼Œ
â€‹        å°† nums1 å˜æˆ [3,4]ï¼Œè€Œæ±‚å–çš„ k å‡å°‘ä¸¤ä½ï¼Œå³ k -= 2





### **å®ç°ä»£ç **

```java
class Solution {
    public double findMedianSortedArrays(int[] nums1, int[] nums2) {

        int len1 = nums1.length;
        int len2 = nums2.length;
        int len = len1 + len2;
        int k1 = (len + 1) / 2;
        int k2 = len / 2 + 1;
        return (double)(dfs(nums1, nums2, 0, 0, len1, len2, k1) + dfs(nums1, nums2, 0, 0, len1, len2, k2)) / 2;
    }
    private int dfs(int[] nums1, int[] nums2, int i, int j, int len1, int len2, int k){
        if(i == len1){
            return nums2[j + k - 1];
        }
        if(j == len2){
            return nums1[i + k - 1];
        }
        if(k == 1){
            return nums1[i] > nums2[j] ? nums2[j] : nums1[i];
        }
        int kk = Math.min(k / 2, Math.min(len1 - i, len2 - j));
        if(nums1[i + kk - 1] < nums2[j + kk - 1]){
            return dfs(nums1, nums2, i + kk, j, len1, len2, k - kk);
        }else{
            return dfs(nums1, nums2, i, j + kk, len1, len2, k - kk);
        }
    }
}
```

