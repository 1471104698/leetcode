
éšæœºäº§ç”Ÿæ•°å­—å¹¶ä¼ é€’ç»™ä¸€ä¸ªæ–¹æ³•ã€‚ä½ èƒ½å¦å®Œæˆè¿™ä¸ªæ–¹æ³•ï¼Œåœ¨æ¯æ¬¡äº§ç”Ÿæ–°å€¼æ—¶ï¼Œå¯»æ‰¾å½“å‰æ‰€æœ‰å€¼çš„ä¸­é—´å€¼ï¼ˆä¸­ä½æ•°ï¼‰å¹¶ä¿å­˜ã€‚

ä¸­ä½æ•°æ˜¯æœ‰åºåˆ—è¡¨ä¸­é—´çš„æ•°ã€‚å¦‚æœåˆ—è¡¨é•¿åº¦æ˜¯å¶æ•°ï¼Œä¸­ä½æ•°åˆ™æ˜¯ä¸­é—´ä¸¤ä¸ªæ•°çš„å¹³å‡å€¼ã€‚

ä¾‹å¦‚ï¼Œ

[2,3,4] çš„ä¸­ä½æ•°æ˜¯ 3

[2,3] çš„ä¸­ä½æ•°æ˜¯ (2 + 3) / 2 = 2.5

è®¾è®¡ä¸€ä¸ªæ”¯æŒä»¥ä¸‹ä¸¤ç§æ“ä½œçš„æ•°æ®ç»“æ„ï¼š

void addNum(int num) - ä»æ•°æ®æµä¸­æ·»åŠ ä¸€ä¸ªæ•´æ•°åˆ°æ•°æ®ç»“æ„ä¸­ã€‚
double findMedian() - è¿”å›ç›®å‰æ‰€æœ‰å…ƒç´ çš„ä¸­ä½æ•°ã€‚
ç¤ºä¾‹ï¼š

addNum(1)
addNum(2)
findMedian() -> 1.5
addNum(3) 
findMedian() -> 2

    /*  
        ä¸­ä½æ•°æ˜¯å°†æ•°ç»„å¹³åˆ†ä¸ºå·¦å³ä¸¤åŠ
        å¹¶ä¸”å·¦è¾¹çš„æ•°å¿…å®šå°äºç­‰äºå³è¾¹çš„æ•°
        å³å·¦æ•°ç»„çš„æœ€å¤§å€¼ å°äºç­‰äº å³æ•°ç»„çš„æœ€å°å€¼

        ç”±äºæˆ‘ä»¬å…³å¿ƒçš„åªæ˜¯ä¸­ä½æ•°ï¼Œå¹¶ä¸å…³å¿ƒå…¶ä»–çš„å…ƒç´ ï¼Œå³æ— éœ€å¯¹å…¶ä»–å…ƒç´ è¿›è¡Œæ’åºç­‰

        æ¯”å¦‚æŸä¸ªæœ‰åºæ•°ç»„    {1ï¼Œ2ï¼Œ3ï¼Œ4ï¼Œ5ï¼Œ6ï¼Œ7}
        æˆ‘ä»¬å¯ä»¥åˆ†ä¸ºä¸¤éƒ¨åˆ† {1ï¼Œ2ï¼Œ3ï¼Œ4} å’Œ {5ï¼Œ6ï¼Œ7}

        æ¯”å¦‚æŸä¸ªæœ‰åºæ•°ç»„    {1ï¼Œ2ï¼Œ3ï¼Œ4ï¼Œ5ï¼Œ6ï¼Œ7ï¼Œ8}
        æˆ‘ä»¬å¯ä»¥åˆ†ä¸ºä¸¤éƒ¨åˆ† {1ï¼Œ2ï¼Œ3ï¼Œ4} å’Œ {5ï¼Œ6ï¼Œ7ï¼Œ8}

        æˆ‘ä»¬å¯ä»¥çœ‹å‡º
        å½“å…ƒç´ ä¸ªæ•°ä¸ºå¥‡æ•°ä¸ªæ—¶ï¼Œä¸­ä½æ•°ä¸ºå‰åŠæ®µçš„æœ€å¤§å€¼
        å½“å…ƒç´ ä¸ªæ•°ä¸ºå¶æ•°ä¸ªæ—¶ï¼Œä¸­ä½æ•°ä¸ºå‰åŠæ®µçš„æœ€å¤§å€¼ å’Œ ååŠæ®µçš„æœ€å°å€¼ä¹‹å’Œ * 0.5

        å› æ­¤ï¼Œæˆ‘ä»¬åªéœ€è¦æœ€å€¼ï¼Œè€Œèƒ½å¤Ÿå¾ˆå¿«å¾—åˆ°æœ€å€¼çš„æ•°æ®ç»“æ„å°±æ˜¯ï¼šå †

        å¤§é¡¶å †å­˜æ”¾å‰åŠæ®µå°å€¼ï¼Œå †é¡¶ä¸ºå°å€¼çš„æœ€å¤§å€¼
        å°é¡¶å †å­˜æ”¾ååŠæ®µå¤§å€¼ï¼Œå †é¡¶ä¸ºå¤§å€¼çš„æœ€å°å€¼
        ä¸¤ä¸ªå †çš„å…ƒç´ ä¸ªæ•°å·®ä¸è¶…è¿‡ 1ï¼Œ
        å³ å¤§é¡¶å †å…ƒç´ ä¸ªæ•° - å°é¡¶å †å…ƒç´ ä¸ªæ•° <= 1ï¼Œ å³å§‹ç»ˆä¿æŒå·¦æ•°ç»„ å…ƒç´ ä¸ªæ•° å¤§äºç­‰äº å³æ•°ç»„å…ƒç´ ä¸ªæ•° ä¸”ä¸è¶…è¿‡ 1

        å½“å…ƒç´ ä¸ªæ•°ä¸º å¶æ•° æ—¶ï¼Œè¿”å› ä¸¤ä¸ªå †é¡¶å…ƒç´ ä¹‹å’Œ / 2ï¼Œå½“å…ƒç´ ä¸ªæ•°ä¸º å¥‡æ•° æ—¶ï¼Œè¿”å›å¤§é¡¶å †å †é¡¶å…ƒç´ 
    */
	
class MedianFinder {

    PriorityQueue<Integer> minHeap;
    PriorityQueue<Integer> maxHeap;
    public MedianFinder() {
        minHeap = new PriorityQueue<>();
        maxHeap = new PriorityQueue<>(Collections.reverseOrder());
    }
    
    public void addNum(int num) {
        if(maxHeap.size() == 0){
            maxHeap.add(num);
        }else if(maxHeap.size() == minHeap.size()){
            /*
            ä¸¤ä¸ªå †å…ƒç´ ä¸ªæ•°ç›¸åŒï¼š
            ä»€ä¹ˆæ—¶å€™æˆ‘ä»¬å¯ä»¥ç›´æ¥æ·»åŠ åˆ° maxHeapï¼Ÿ
            å½“
            num >= maxHeap.peek() && num <= minHeap.peek()
            æˆ–
            num <= maxHeap.peek() && num <= minHeap.peek()

            ç»¼ä¸Šï¼Œåªè¦ num <= minHeap.peek() å°±å¯ä»¥ç›´æ¥æ·»åŠ åˆ° maxHeap

            è€Œå¦‚æœ num > minHeap.peek()ï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦æŒ¤å‡º minHeap çš„æœ€å°å€¼ï¼Œå†å°† num æ·»åŠ åˆ° minHeap
			(
			æƒ³æƒ³è¿™æ˜¯ä¸ºä»€ä¹ˆï¼Ÿ 
			æç¤ºï¼š
			æ’å…¥é¡ºåº ï¼š1 2 3ï¼Œæ­¤æ—¶ maxHeap = 1, minHeap = 2ï¼Œnum = 3  æ’å…¥å ğŸ‘‰ maxHeap = 1 2, minHeap = 3
			æ’å…¥é¡ºåº ï¼š3 2 1ï¼Œæ­¤æ—¶ maxHeap = 2, maxHeap = 3ï¼Œnum = 1  æ’å…¥å ğŸ‘‰ maxHeap = 1 2, minHeap = 3
			æ’å…¥é¡ºåºï¼š 1 3 2ï¼Œæ­¤æ—¶ maxHeap = 1, maxHeap = 3ï¼Œnum = 2  æ’å…¥å ğŸ‘‰ maxHeap = 1 2, minHeap = 3
			)
            */
            if(minHeap.peek() < num){
                maxHeap.add(minHeap.poll());
                minHeap.add(num);
            }else{
                maxHeap.add(num);
            }
        }else { 
            /*
            maxHeap å…ƒç´ ä¸ªæ•° æ¯” minHeap å…ƒç´ ä¸ªæ•° å¤š 1
            ä»€ä¹ˆæ—¶å€™æˆ‘ä»¬å¯ä»¥ç›´æ¥æ·»åŠ åˆ° minHeapï¼Ÿ
            å½“ num >= maxHeap.peek() æ—¶å°±å¯ä»¥ç›´æ¥æ·»åŠ åˆ° minHeap

            å¦‚æœ num < maxHeap.peek()ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦æŒ¤å‡º maxHeap çš„æœ€å¤§å€¼ï¼Œå†å°† num æ·»åŠ åˆ° maxHeap
            */
            if(maxHeap.peek() > num){
                minHeap.add(maxHeap.poll());
                maxHeap.add(num);
            }else{
                minHeap.add(num);
            }
        }
    }
    
    public double findMedian() {
        int sum = minHeap.size() + maxHeap.size();
        if((sum & 1) == 0){
            return (minHeap.peek() + maxHeap.peek()) * 0.5;
        }else{
            return maxHeap.peek();
        }
    }
}