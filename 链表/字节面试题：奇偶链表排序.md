# 字节面试题：奇偶链表排序

```java
给定一个链表，其中奇数位是升序的，偶数位是降序的，实现链表的排序
比如 1->8->3->6->5->4->7->2
    第一个节点是奇数位
排序后输出结果为 1->2->3->4->5->6->7->8
```



```java
package cn.oy;

import cn.oy.all.ListNode;
import cn.oy.all.TreeNode;
import javafx.util.Pair;

import java.util.*;

class Solution {
    public ListNode reverseList(ListNode head) {
        /*
        奇数位升序，偶数位降序，完成排序
        1->8->3->6->5->4->7->2
        我们将奇数和偶数位分成两条链表，然后将偶数位链表反转，然后根据 有序链表那样直接进行排序
        */
        ListNode cur = head;
        
        int n = 1;
        //分为奇偶
        ListNode oddDummy = new ListNode(-1);
        ListNode evenDummy = new ListNode(-1);
        ListNode oddNode = oddDummy;
        ListNode evenNode = evenDummy;
        while(cur != null){
            ListNode temp = cur.next;
            if((n & 1) == 0){
                evenNode.next = cur;
                evenNode = cur;
            }else{
                oddNode.next = cur;
                oddNode = cur;
            }
            cur.next = null;
            cur = temp;
            n++;
        }

        //反转偶数链表
        evenDummy.next = reverseNode(evenDummy.next);

        //排成有序链表
        
        ListNode newHead = sortList(oddDummy.next, evenDummy.next);
        printList(newHead);
        return newHead;
    }
    //链表反转
    private ListNode reverseNode(ListNode head){
        ListNode pre = null;
        while(head != null){
            ListNode temp = head.next;
            head.next = pre;
            pre = head;
            head = temp;
        }
        return pre;
    }
    
    private ListNode sortList(ListNode oddNode, ListNode evenNode){
        ListNode dummy = new ListNode(-1);
        ListNode pre = dummy;
        while(oddNode != null && evenNode != null){
            if(oddNode.val > evenNode.val){
                pre.next = evenNode;
                evenNode = evenNode.next;
            }else{
                pre.next = oddNode;
                oddNode = oddNode.next;
            }
            pre = pre.next;
        }
        pre.next = oddNode == null ? evenNode : oddNode;
        return dummy.next;
    }

    private ListNode buildList(int[] arr){
        ListNode dummy = new ListNode(-1);
        ListNode pre = dummy;
        for(int num : arr){
            pre.next = new ListNode(num);
            pre = pre.next;
        }
        return dummy.next;
    }

    private void printList(ListNode head){
        while(head != null){
            System.out.print(head.val);
            head = head.next;
            if(head != null){
                System.out.print("->");
            }
        }
    }


    public static void main (String[]args){
        Solution solution = new Solution();
        int[] list = {1,8,3,6,5,4,7,2};
        solution.reverseList(solution.buildList(list));
    }
}
```

