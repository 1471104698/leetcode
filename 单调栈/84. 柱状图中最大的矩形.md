# [84. 柱状图中最大的矩形](https://leetcode-cn.com/problems/largest-rectangle-in-histogram/)

```
给定 n 个非负整数，用来表示柱状图中各个柱子的高度。每个柱子彼此相邻，且宽度为 1 。

求在该柱状图中，能够勾勒出来的矩形的最大面积。
```

## **示例**

```
示例:
输入: [2,1,5,6,2,3]
输出: 10
```

![img](https://assets.leetcode-cn.com/aliyun-lc-upload/uploads/2018/10/12/histogram.png)

```
以上是柱状图的示例，其中每个柱子的宽度为 1，给定的高度为 [2,1,5,6,2,3]。
```

![img](https://assets.leetcode-cn.com/aliyun-lc-upload/uploads/2018/10/12/histogram_area.png)

```
图中阴影部分为所能勾勒出的最大矩形面积，其面积为 10 个单位。
```





## **一般暴力解法**

```
直接以某根柱子为基准， 向左右遍历查找 大于等一会 当前柱子 的柱子数
```

> 以第 1 根柱子为基准的面积

![能完全覆盖第0个柱子的矩形](https://img-blog.csdnimg.cn/20190328100531585.png)

> 以第 2 根柱子为基准的面积

![在这里插入图片描述](https://img-blog.csdnimg.cn/20190328100617165.png)

> 以第 3 根柱子为基准的面积

![在这里插入图片描述](https://img-blog.csdnimg.cn/20190328100648369.png)





## **优化实现代码**

```java
class Solution {
    public int largestRectangleArea(int[] heights) {
        int len = heights.length;
        Deque<Integer> stack = new LinkedList<>();
        stack.push(-1);
        int maxVal = 0;
        for(int i = 0; i <= len; i++){
            int cur = i < len ? heights[i] : 0;
            while(stack.peek() != -1 && heights[stack.peek()] > cur){
                int temp = stack.pop();
                int width = i - stack.peek() - 1;
                maxVal = Math.max(maxVal, width * heights[temp]);
            }
            stack.push(i);
        }
        return maxVal;
    }
}
```

